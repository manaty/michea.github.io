var receiptCss = "html,body{width:48mm;margin:0px;font-family: Arial, Helvetica, sans-serif;font-size: 3.6mm;} "
+".price_table{width:48mm;table-layout: fixed;border-spacing: 0px;} "
+".price_td{text-align: right;} "
+".announce{font-size: 2mm;}"
+".amnt_td{width: 6mm;text-align: center;} "
+".desc_td{width: 26mm;white-space: nowrap;overflow: hidden;text-align: left;}";

var receiptLogo="data:image/png;base64,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";

var receipt;

function printReceipt() {
    paymentDiv.style.display = 'none';
    categoriesDiv.style.display = 'flex';
    orderStore.closeOrder(orderStore.currentOrder);
    let im = inventoryStore.registerOrder(orderStore.currentOrder);
    productStore.registerInventoryMovement(im);
    var mywindow = window.open('', 'PRINT', 'height=400,width=200');
    mywindow.document.write('<!DOCTYPE html><html><head><meta charset="utf-8"/>');
    mywindow.document.write('<title>Receipt ' + orderStore.currentOrder.orderNumber + '</title>');
    mywindow.document.write('<style>'+receiptCss+'</style>');
    mywindow.document.write('<script src="/pos/lib/JsBarcode.min.js"></script>');
    mywindow.document.write('</head><body>');
    mywindow.document.write('<div style="text-align: center"><img src="'+receiptLogo+'" style="width:90%;margin:0px;"/>');
    mywindow.document.write('National Highway, Bi&ntilde;an<br/>4024 Laguna<br/></div>');
    mywindow.document.write('VAT. Reg. TIN: 288-889-273<br/>http://michea.ph');
    mywindow.document.write('<div><br/><span id="currentDateTime" style="text-align: right;width: 100%">' +
        formatAMPM(orderStore.currentOrder.date) + '</span><br/>');
    mywindow.document.write('ORD# <span id="orderNumber">' + orderStore.currentOrder.orderNumber + '</span><br/>');
    mywindow.document.write('ACC# <span id="accreditationNumber">' + machineAccreditationNumber + '</span><br/>');
    if (orderStore.currentOrder.cancelledOrderNumber) {
        mywindow.document.write(' Cancelled# ' + orderStore.currentOrder.cancelledOrderNumber + '<br/>');
    }
    if (orderStore.currentOrder.vipNumber) {
        mywindow.document.write(' VIP# ' + orderStore.currentOrder.vipNumber + '<br/>');
    }
    let username=sessionStorage.getItem("username");
    if(username){
        mywindow.document.write(' Cashier: ' + username + '<br/>');
    }

    if (orderStore.currentOrder.items) {
        mywindow.document.write('<br/>Items:<br/><table class="price_table">');
        mywindow.document.write('<tr style="font-weight: bold">');
        mywindow.document.write('    <th class="desc_td">Description</th>');
        mywindow.document.write('    <th class="amnt_td" style="font-weight: bold">Qt</th>');
        mywindow.document.write('    <th  class="price_td" style="font-weight: bold">Amnt</th>');
        mywindow.document.write('</tr>');
        for (let item of orderStore.currentOrder.items) {
            mywindow.document.write('<tr><td class="desc_td">' + item.description + '</td>');
            mywindow.document.write('<td class="amnt_td">' + ((item.quantity > 1) ? item.quantity : '') + '</td>');
            mywindow.document.write('<td class="price_td">' + item.price + '</td>');
        }
        mywindow.document.write('</table>');
    }

    mywindow.document.write('<br/><table class="price_table"><tr>');
    mywindow.document.write('<td class="desc_td" style="font-weight: bold">Balance due</td>');
    mywindow.document.write('<td class="price_td" style="font-weight: bold">&#8369;' + orderStore.currentOrder.totalPrice + '</td></tr>');
    mywindow.document.write('<td class="desc_td" style="font-weight: bold">Cash</td>');
    mywindow.document.write('<td class="price_td" style="font-weight: bold">&#8369;' + orderStore.currentOrder.totalPaid + '</td></tr>');
    mywindow.document.write('<td class="desc_td" style="font-weight: bold">Change</td>');
    mywindow.document.write('<td class="price_td" style="font-weight: bold">&#8369;' + orderStore.currentOrder.totalChange + '</td></tr></table>');

    mywindow.document.write('</div><div style="text-align: center">');
    mywindow.document.write('<img id="barcode" style="width:80%;height:8mm"/>');
    mywindow.document.write('<br/><span class="announce">THIS SERVES AS AN OFFICIAL RECEIPT</span></div>');
    mywindow.document.write('<script>JsBarcode("#barcode", ' + orderStore.currentOrder.orderNumber + ',{format: "CODE128",width:2,');
    mywindow.document.write('height:30,displayValue: false });</script>')
    mywindow.document.close(); // necessary for IE >= 10
    mywindow.focus(); // necessary for IE >= 10*/

    mywindow.print();
    mywindow.close();
    newOrder();
    return true;
}
